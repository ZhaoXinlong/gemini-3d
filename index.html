<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>Gemini 宇宙 3D 矩阵 (修复版)</title>
    <style>
        body { margin: 0; overflow: hidden; background-color: #020205; color: white; font-family: sans-serif; }
        #ui { position: absolute; top: 20px; width: 100%; text-align: center; pointer-events: none; z-index: 10; }
        #error-log { position: absolute; bottom: 10px; left: 10px; color: #ff4444; font-size: 12px; background: rgba(0,0,0,0.5); }
        #loading { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); }
    </style>
</head>
<body>
    <div id="ui">
        <h1>Gemini 模型进化星图</h1>
        <p>如果看到球体，请用鼠标旋转。如果还是黑屏，请看左下角报错。</p>
    </div>
    <div id="loading">正在召唤 3D 引擎...</div>
    <div id="error-log"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js" onerror="logError('核心库加载失败')"></script>
    <script src="https://cdn.jsdelivr.net/gh/mrdoob/three.js@r128/examples/js/controls/OrbitControls.js" onerror="logError('控制器加载失败')"></script>

    <script>
        function logError(msg) {
            document.getElementById('error-log').innerHTML += "⚠️ " + msg + "<br>";
            document.getElementById('loading').innerHTML = "加载失败，请刷新或更换网络。";
        }

        window.onload = function() {
            if (typeof THREE === 'undefined') {
                logError("浏览器未能识别 THREE 插件");
                return;
            }

            try {
                init3D();
                document.getElementById('loading').style.display = 'none';
            } catch (e) {
                logError("JS 运行错误: " + e.message);
            }
        };

        function init3D() {
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            const renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.body.appendChild(renderer.domElement);

            // 如果控制器加载成功就启用，不成功也不影响球体显示
            if (THREE.OrbitControls) {
                const controls = new THREE.OrbitControls(camera, renderer.domElement);
                camera.position.set(5, 5, 10);
                controls.update();
            } else {
                camera.position.z = 12;
            }

            // 添加星空背景
            const starGeo = new THREE.BufferGeometry();
            const starPoints = [];
            for(let i=0; i<3000; i++) {
                starPoints.push((Math.random()-0.5)*100, (Math.random()-0.5)*100, (Math.random()-0.5)*100);
            }
            starGeo.setAttribute('position', new THREE.Float32BufferAttribute(starPoints, 3));
            scene.add(new THREE.Points(starGeo, new THREE.PointsMaterial({color: 0x888888, size: 0.1})));

            // 绘制 2025 年末最核心的三个 Gemini 模型
            const modelData = [
                { name: "3.0 Pro", x: 4, y: 2, color: 0xff00ff, size: 0.8 },
                { name: "2.5 DeepThink", x: 0, y: 4, color: 0xffffff, size: 1.0 },
                { name: "1.5 Pro", x: -4, y: 0, color: 0x4285f4, size: 0.6 }
            ];

            modelData.forEach(m => {
                const sphere = new THREE.Mesh(
                    new THREE.SphereGeometry(m.size, 32, 32),
                    new THREE.MeshBasicMaterial({ color: m.color, wireframe: true })
                );
                sphere.position.set(m.x, m.y, 0);
                scene.add(sphere);
            });

            function animate() {
                requestAnimationFrame(animate);
                scene.rotation.y += 0.002;
                renderer.render(scene, camera);
            }
            animate();
        }
    </script>
</body>
</html>
